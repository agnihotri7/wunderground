{% extends "base.html" %}

{% block title %} Plot Graph {% endblock %}
{% block extra_head %}

  {% if wp == 'tmp' %}
    <script type="text/javascript">
      function plotGraph(yr, mnth, day, data) {
          var chart = {
            zoomType: 'x'
          };
          var title = {
            text: 'Temprature'
          };
          var subtitle = {
            text: 'source wunderground.com'
          };
          var xAxis = {
            type: 'datetime',
            minRange: 24 * 3600000,
            title: {
               text: 'Hours'
            }
          };
          var yAxis = {
            title: {
               text: 'Celcious'
            }
          };
          var legend = {
            enabled: false
          };
          tooltip: {
             valueSuffix: ' *c'
          };
          var plotOptions = {
            // spline: {
               // fillColor: {
               //    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
               //    stops: [
               //       [0, Highcharts.getOptions().colors[0]],
               //       [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
               //    ]
               // },
               marker: {
                  radius: 2
               },
               lineWidth: 1,
               states: {
                  hover: {
                     lineWidth: 1
                  }
               },
               threshold: null
            // }
          };
          var series= [{
            name: 'Temprature',
            pointInterval: 3600000,
            pointStart: Date.UTC(yr, mnth-1, day),
            data: data
            }
          ];

          var json = {};
          json.chart = chart;
          json.title = title;
          json.subtitle = subtitle;
          json.legend = legend;
          json.xAxis = xAxis;
          json.yAxis = yAxis;
          json.series = series;
          json.plotOptions = plotOptions;
          $('#wunderground').highcharts(json);
      }

      $(document).ready(function() {
        var data = {{data}};
        var yr = {{yr}};
        var mnth = {{mnth}};
        var day = {{day}};
        plotGraph(yr, mnth, day, data)
      });
    </script>
  {% elif wp == 'hum' %}
    <script type="text/javascript">
      function plotGraph(yr, mnth, day, data) {
          var chart = {
            zoomType: 'x'
          };
          var title = {
            text: 'Humidity'
          };
          var subtitle = {
            text: 'source wunderground.com'
          };
          var xAxis = {
            type: 'datetime',
            minRange: 24 * 3600000,
            title: {
               text: 'Hours'
            }
          };
          var yAxis = {
            title: {
               text: 'Celcious'
            }
          };
          var legend = {
            enabled: false
          };
          tooltip: {
             valueSuffix: ' *c'
          };
          var plotOptions = {
            // spline: {
               // fillColor: {
               //    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
               //    stops: [
               //       [0, Highcharts.getOptions().colors[0]],
               //       [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
               //    ]
               // },
               marker: {
                  radius: 2
               },
               lineWidth: 1,
               states: {
                  hover: {
                     lineWidth: 1
                  }
               },
               threshold: null
            // }
          };
          var series= [{
            name: 'Humidity',
            pointInterval: 3600000,
            pointStart: Date.UTC(yr, mnth-1, day),
            data: data
            }
          ];

          var json = {};
          json.chart = chart;
          json.title = title;
          json.subtitle = subtitle;
          json.legend = legend;
          json.xAxis = xAxis;
          json.yAxis = yAxis;
          json.series = series;
          json.plotOptions = plotOptions;
          $('#wunderground').highcharts(json);
      }

      $(document).ready(function() {
        var data = {{data}};
        var yr = {{yr}};
        var mnth = {{mnth}};
        var day = {{day}};
        plotGraph(yr, mnth, day, data)
      });
    </script>
  {% elif wp == 'dew' %}
    <script type="text/javascript">
      console.log('dew. pt')
      function plotGraph(yr, mnth, day, data) {
          var chart = {
            zoomType: 'x'
          };
          var title = {
            text: 'Dew Point'
          };
          var subtitle = {
            text: 'source wunderground.com'
          };
          var xAxis = {
            type: 'datetime',
            minRange: 24 * 3600000,
            title: {
               text: 'Hours'
            }
          };
          var yAxis = {
            title: {
               text: 'Percentage'
            }
          };
          var legend = {
            enabled: false
          };
          tooltip: {
             valueSuffix: ' %'
          };
          var plotOptions = {
            // spline: {
               // fillColor: {
               //    linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
               //    stops: [
               //       [0, Highcharts.getOptions().colors[0]],
               //       [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
               //    ]
               // },
               marker: {
                  radius: 2
               },
               lineWidth: 1,
               states: {
                  hover: {
                     lineWidth: 1
                  }
               },
               threshold: null
            // }
          };
          var series= [{
            name: 'Dew Point',
            pointInterval: 3600000,
            pointStart: Date.UTC(yr, mnth-1, day),
            data: data
            }
          ];

          var json = {};
          json.chart = chart;
          json.title = title;
          json.subtitle = subtitle;
          json.legend = legend;
          json.xAxis = xAxis;
          json.yAxis = yAxis;
          json.series = series;
          json.plotOptions = plotOptions;
          $('#wunderground').highcharts(json);
      }

      $(document).ready(function() {
        var data = {{data}};
        var yr = {{yr}};
        var mnth = {{mnth}};
        var day = {{day}};
        plotGraph(yr, mnth, day, data)
      });
    </script>
  {% endif %}
{% endblock %}

{% block content %}
  <div id="wunderground" style="width:100%; height:400px;"></div>
{% endblock %}
